version: "3.8"

services:
  app:
    image: ${APP_IMAGE:-ghcr.io/zaheria985/harmony_homeschool:latest}
    restart: unless-stopped
    environment:
      DATABASE_URL: ${DATABASE_URL:?Set DATABASE_URL in .env}
      NEXTAUTH_SECRET: ${NEXTAUTH_SECRET:?Set NEXTAUTH_SECRET in .env}
      NEXTAUTH_URL: ${NEXTAUTH_URL:?Set NEXTAUTH_URL in .env}
      LLM_PROVIDER: ${LLM_PROVIDER:-openai}
      LLM_API_KEY: ${LLM_API_KEY:-}
      LLM_BASE_URL: ${LLM_BASE_URL:-https://api.openai.com/v1}
      FILERUN_BASE_URL: ${FILERUN_BASE_URL:-}
      UPLOADS_DIR: /app/public/uploads
    volumes:
      - uploads:/app/public/uploads
    ports:
      - "3000:3000"

volumes:
  uploads:
